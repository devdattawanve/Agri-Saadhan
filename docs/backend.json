{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents an individual user of the Agri Saadhan application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity, matching Firebase Auth UID."
        },
        "name": {
          "type": "string",
          "description": "The full name of the user."
        },
        "contactPhoneNumber": {
          "type": "string",
          "description": "The phone number of the user, used for authentication and contact."
        },
        "villageTehsil": {
          "type": "string",
          "description": "The village or tehsil where the user resides."
        },
        "preferredLanguage": {
          "type": "string",
          "description": "The user's preferred language for the application interface."
        },
        "profilePictureUrl": {
            "type": "string",
            "description": "URL of the user's profile picture."
        },
        "gender": {
            "type": "string",
            "description": "The gender of the user.",
            "enum": ["Male", "Female", "Other", "Prefer not to say"]
        },
        "roles": {
          "type": "array",
          "description": "The roles assigned to the user.",
          "items": {
            "type": "string",
            "enum": [
              "FARMER",
              "EQUIPMENT_OWNER",
              "DRIVER",
              "SAHAYAK"
            ]
          }
        },
        "sahayakStatus": {
          "type": "string",
          "description": "The verification status of a Sahayak.",
          "enum": [
            "NONE",
            "PENDING",
            "VERIFIED"
          ]
        },
        "commissionRate": {
            "type": "number",
            "description": "The commission rate for a Sahayak, if applicable."
        },
        "farmSizeInAcres": {
          "type": "number",
          "description": "The size of the user's farm in acres. Applicable only if the role is FARMER."
        },
        "latitude": {
            "type": "number"
        },
        "longitude": {
            "type": "number"
        },
        "geohash": {
            "type": "string"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp when the user account was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp when the user account was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "contactPhoneNumber",
        "villageTehsil",
        "roles",
        "sahayakStatus"
      ]
    },
    "Equipment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Equipment",
      "type": "object",
      "description": "Represents a piece of agricultural equipment available for rental.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name or model of the equipment."
        },
        "type": {
          "type": "string",
          "description": "The category of the equipment.",
          "enum": [
            "Tractor",
            "Rotavator",
            "Plow",
            "Harvester",
            "Sprayer",
            "General Farm Equipment"
          ]
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the equipment for the user."
        },
        "ownerId": {
          "type": "string",
          "description": "The UID of the user who owns this equipment."
        },
        "village": {
          "type": "string",
          "description": "The village where the equipment is located."
        },
        "price": {
          "type": "object",
          "description": "The rental price of the equipment.",
          "properties": {
            "perHour": {
              "type": "number",
              "description": "Price per hour"
            },
            "perDay": {
              "type": "number",
              "description": "Price per day"
            }
          }
        },
        "driverChargePerHour": {
            "type": "number",
            "description": "Optional additional charge per hour if a driver is requested."
        },
        "deliveryFee": {
            "type": "number",
            "description": "Optional flat fee for delivering the equipment to the farmer."
        },
        "verified": {
          "type": "boolean",
          "description": "Whether the equipment is verified by the Gram Panchayat. Defaults to false."
        },
        "availabilityStatus": {
          "type": "string",
          "description": "The current availability of the equipment.",
          "enum": [
            "available",
            "maintenance"
          ]
        },
        "geohash": {
          "type": "string",
          "description": "Geohash for location-based queries."
        },
        "latitude": {
          "type": "number"
        },
        "longitude": {
          "type": "number"
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of a placeholder or uploaded image for the equipment."
        },
        "imageHint": {
          "type": "string",
          "description": "A hint for AI-powered image search or generation."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "name",
        "type",
        "ownerId",
        "price",
        "village",
        "availabilityStatus"
      ]
    },
    "Booking": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Booking",
      "type": "object",
      "description": "Represents a rental transaction for a piece of equipment.",
      "properties": {
        "id": {
          "type": "string"
        },
        "equipmentId": {
          "type": "string"
        },
        "ownerId": {
          "type": "string"
        },
        "sahayakId": {
          "type": "string",
          "description": "UID of the Sahayak who created the booking, if applicable."
        },
        "driverId": {
          "type": "string",
          "description": "UID of the Driver assigned to the booking."
        },
        "createdBy": {
          "type": "string",
          "description": "UID of the user who initiated the booking (can be a Farmer or a Sahayak)."
        },
        "beneficiary": {
          "type": "string",
          "description": "UID of the farmer who will use the equipment."
        },
        "status": {
          "type": "string",
          "enum": [
            "pending",
            "confirmed",
            "rejected",
            "ongoing",
            "completed",
            "cancelled"
          ]
        },
        "startDate": {
            "type": "string",
            "format": "date-time"
        },
        "endDate": {
            "type": "string",
            "format": "date-time"
        },
        "requiresDriver": {
            "type": "boolean"
        },
        "pickupType": {
            "type": "string",
            "enum": ["SELF_PICKUP", "OWNER_DELIVERY"]
        },
        "baseRate": {
            "type": "number",
            "description": "Calculated base cost for the equipment rental duration."
        },
        "driverCharge": {
            "type": "number",
            "description": "Calculated cost for the driver."
        },
        "deliveryCharge": {
            "type": "number",
            "description": "Calculated cost for delivery."
        },
        "totalAmount": {
            "type": "number",
            "description": "The total final amount for the booking."
        },
        "sahayakCommission": {
            "type": "number"
        },
        "platformFee": {
            "type": "number"
        },
        "paymentStatus": {
          "type": "string",
          "description": "The payment status of the booking.",
          "enum": [
            "pending",
            "completed",
            "failed"
          ]
        },
        "paymentId": {
          "type": "string",
          "description": "The ID of the payment transaction, if applicable."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "equipmentId",
        "ownerId",
        "createdBy",
        "beneficiary",
        "status",
        "startDate",
        "endDate",
        "totalAmount"
      ]
    }
  },
  "auth": {
    "providers": [
      "phone"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores individual user profiles."
        }
      },
      {
        "path": "/equipment/{equipmentId}",
        "definition": {
          "entityName": "Equipment",
          "schema": {
            "$ref": "#/backend/entities/Equipment"
          },
          "description": "Stores individual pieces of agricultural equipment."
        }
      },
      {
        "path": "/bookings/{bookingId}",
        "definition": {
          "entityName": "Booking",
          "schema": {
            "$ref": "#/backend/entities/Booking"
          },
          "description": "Stores booking and rental transaction records."
        }
      }
    ]
  }
}
